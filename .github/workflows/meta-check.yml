# Workflow –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è META-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö.
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π push –∏ pull_request –≤ –≤–µ—Ç–∫—É main.
name: –ü—Ä–æ–≤–µ—Ä–∫–∞ META –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
jobs:
  meta-validation:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout –∫–æ–¥–∞
        uses: actions/checkout@v4

      - name: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è META –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö
        run: |
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫
          if [ ! -d "docs/artifacts" ]; then
            echo "‚ö†Ô∏è –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è docs/artifacts –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞."
            exit 0
          fi

          find docs/artifacts -name "*.md" -print0 | while IFS= read -r -d '' file; do
            if ! grep -q "---META:" "$file"; then
              echo "‚ùå –í —Ñ–∞–π–ª–µ $file –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç META-–∑–∞–≥–æ–ª–æ–≤–æ–∫"
              exit 1
            fi
            echo "‚úÖ –í —Ñ–∞–π–ª–µ $file –Ω–∞–π–¥–µ–Ω META-–∑–∞–≥–æ–ª–æ–≤–æ–∫"
          done
          echo "üéâ –í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É."
